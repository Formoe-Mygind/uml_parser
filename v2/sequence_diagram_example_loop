@startuml
mainframe sd SimpleThermostat
participant "psm:PSM" as psm
participant "pim:PIM" as pim
note over pim #90F0FF: TRIGGER
pim <-] : add_thermometer(id, txt)
note over pim #90F0FF: EFFECT
pim -> psm: add_thermometer(id, txt)
note over pim #BB9928: TRIGGER
pim <-] : add_device(did, txt)
note over pim #BB9928: EFFECT
pim -> psm: add_device(did, txt)
pim <-] : add_temperature(temp1)
pim ->] : prompt("Now entering thermostat")
loop
|||
  psm -> pim: temperature(id, txt, temp2)
  alt
  |||
      else temp2<temp1-1
        pim -> psm: SwitchOn(did)
      else temp2>=temp1+1
        pim -> psm: SwitchOff(did)
  end
end
pim <-]: SwitchOn(did)
pim -> psm: SwitchOn(did)
pim <-]: SwitchOff(did)
pim -> psm: SwitchOff(did)
@enduml
